---
title: "Hand-Extracted Node and Edge Tables"
author: "Bob"
date: "2025-09-26"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r libraries, message=FALSE}
library('dplyr')
```

# Examples of node and edge tables hand-extracted from WinBUGS examples

## Rats

```{r rats}

plate_range <- list(i='1:N', j='1:T')

nodes <- 'label       |   plates
tau.alpha   | none
alpha.c     | none
alpha0      | none
beta.c      | none
tau.beta    | none
sigma.alpha | none
tau.c       | none
sigma       | none
sigma.beta  | none
alpha[i]    | i
beta[i]     | i
mu[i,j]     | i,j
Y[i,j]      | i,j
x[j]        | j
' %>% gsub(' ', '', .) %>% textConnection %>% read.delim(sep='|')

edges <- 'from, to, category
sigma.alpha, tau.alpha, logical
tau.alpha, alpha[i], stochastic
alpha.c, alpha[i], stochastic
alpha.c, alpha0, logical
beta.c, alpha0, logical
beta.c, beta[i], stochastic
tau.beta, beta[i], stochastic
sigma.beta, tau.beta, logical
tau.c, sigma, logical
tau.c, "Y[i,j]", stochastic
alpha[i], "mu[i,j]", logical
beta[i], "mu[i,j]", logical
x[j], "mu[i,j]", logical
"mu[i,j]", "Y[i,j]", logical
' %>% gsub(' ', '', .) %>% textConnection %>% read.csv

```

```{r show_tables}
library(knitr)

kable(nodes)

kable(edges)

```


## Draw the graph

```{r draw_graph}
library(igraph)

g <- graph_from_edgelist(as.matrix(edges[c('from', 'to')]), directed = TRUE)

plot(g,
     vertex.label.cex = 0.8,
     vertex.label.color = "black",
     vertex.color = "lightblue",
     edge.arrow.size = 0.2,
     layout = layout_with_kk)

```


from `?plot.igraph`:

"One convenient way to plot graphs is to plot with tkplot() first, handtune the placement of the vertices, query the coordinates by the tk_coords() function and use them with plot() to plot the graph to any R device."
