---
title: "helloWidget and the standalone JavaScript demo"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{helloWidget and the standalone JavaScript demo}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(collapse = TRUE, comment = "#>")
```

# Introduction

The `helloWidget` package provides a minimal example of how an R function can wrap a JavaScript visualization and expose it to R users through the `htmlwidgets` framework.  

This vignette shows both:

1. How to use the R function `helloWidget()` inside R, and  
2. How the same JavaScript rendering code can be used directly in a standalone web page.  

---

# Using `helloWidget` in R

```{r eval=TRUE}
library(helloWidget)

# a simple numeric vector
helloWidget(c(1, 3, 2, 5, 4))
```

The widget draws a small bar chart. You can embed it in an R Markdown document, a Shiny app, or view it interactively in RStudio.

---

# Standalone JavaScript App

The visualization logic is implemented in JavaScript (using D3) and packaged in the file:

```
inst/htmlwidgets/helloWidget.js
```

This file defines a global function:

```js
renderHelloWidget(container, opts)
```

You can reuse this function directly in a plain HTML page. A minimal standalone demo is provided in:

```
inst/examples/helloWidget_JS/index.html
```

That HTML page **requires** the external `helloWidget.js` file. It does not contain a fallback renderer. If the file is missing or does not define `renderHelloWidget`, the page will display an error and stop execution.

---

# Running the Standalone Demo

The standalone HTML demo is bundled inside the package. You can open it directly from R with:

```{r eval=FALSE}
library(helloWidget)
example_js()
```

This will launch `inst/examples/helloWidget_JS/index.html` in your default web browser, along with the required `helloWidget.js` file.

---

# Example HTML Snippet

Here is the essential structure of the standalone demo:

```html
<!DOCTYPE html>
<html>
  <head>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="helloWidget.js"></script>
  </head>
  <body>
    <div id="widgetContainer"></div>
    <script>
      const container = document.getElementById('widgetContainer');
      renderHelloWidget(container, { values: [1,3,2,5,4] });
    </script>
  </body>
</html>
```

---

# Conclusion

- The R `helloWidget()` function wraps the JavaScript renderer for use inside R.  
- The **same `helloWidget.js` file** can be reused directly in a browser for standalone demos.  
- The `example_js()` helper opens a packaged HTML page (`index.html`) that demonstrates this usage.  

This dual setup allows you to prototype and test visualization logic outside R, while still providing an R interface for reproducible workflows.
