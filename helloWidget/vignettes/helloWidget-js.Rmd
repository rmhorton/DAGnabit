---
title: "helloWidget and the standalone JavaScript demo"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{helloWidget and the standalone JavaScript demo}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(collapse = TRUE, comment = "#>")
```

# Introduction

The `helloWidget` package provides a minimal example of how an R function can wrap a JavaScript visualization and expose it to R users through the `htmlwidgets` framework.  

This vignette shows both:

1. How to use the R function `helloWidget()` inside R, and  
2. How the same JavaScript rendering code can be used directly in a standalone web page.  

---

# Using `helloWidget` in R

```{r eval=TRUE}
library(helloWidget)

# a simple numeric vector
helloWidget(c(1, 3, 2, 5, 4))
```

The widget draws a small bar chart. You can embed it in an R Markdown document, a Shiny app, or view it interactively in RStudio.

---

# The Standalone JavaScript App

The visualization logic is implemented in JavaScript (using D3). Because the widget is built with `htmlwidgets`, the underlying JS can be reused in a simple web page.

A minimal standalone app is provided in the package under:

```
inst/examples/helloWidget_JS/index.html
```

Open this file in a browser to see a small single-page application. It lets you enter a numeric vector and renders the same bar chart using the widgetâ€™s JavaScript code.

---

# Example: Running Outside of R

Save the following snippet as `index.html`:

```html
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>helloWidget Demo</title>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script>
      // minimal renderer
      function helloWidgetRender(values, container) {
        values = values.map(Number).filter(v => !isNaN(v));
        container.innerHTML = "";
        const svg = d3.select(container).append("svg").attr("width", 400).attr("height", 200);
        const y = d3.scaleLinear().domain([0, d3.max(values)]).range([0, 180]);
        svg.selectAll("rect")
          .data(values).enter().append("rect")
          .attr("x", (d,i) => i*40+5)
          .attr("y", d => 180 - y(d))
          .attr("width", 30)
          .attr("height", d => y(d))
          .attr("fill", "steelblue");
      }
      window.onload = () => helloWidgetRender([1,3,2,5,4], document.body);
    </script>
  </head>
  <body></body>
</html>
```

When opened in a browser, this produces the same output as `helloWidget(c(1,3,2,5,4))` in R.

---

# Running the Packaged Example from R

For convenience, the JavaScript demo is bundled inside the package. You can open it directly from R with:

```{r eval=FALSE}
library(helloWidget)
example_js()
```

This will launch the standalone HTML demo in your default web browser. It is the same file located under `inst/examples/helloWidget_JS/index.html` in the source tree.

---

# Conclusion

- The R `helloWidget()` function provides a convenient wrapper to call the visualization from R.  
- The same JavaScript code can be reused in a plain HTML page, making it easy to test and iterate on visualization logic outside R.  
- The `example_js()` helper lets you run the packaged demo directly from R without leaving your session.  

This dual workflow is a powerful way to prototype interactive graphics: you can quickly test the visualization in a browser, then package it into an R `htmlwidget` for use in analysis workflows and reproducible reports.
